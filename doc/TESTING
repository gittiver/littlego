Purpose of this document
------------------------
This document has information about how the project's automated testing
facilities work. It also contains a script for manual testing of most of the
application's features. The intent is to execute the script before a new
version is released to the App Store.


Automated unit tests
--------------------
All unit test related files are located in the top-level folder "test".

The Xcode project defines a target "Unit tests" which builds a unit test bundle.
To make the unit tests build automatically every time the main target is built,
I usually make sure that in all of my Xcode schemes the checkbox "Run" is
checked not only for the main target, but for the unit test target as well.
Note that the same result can also be achieved by a target dependency.

To run the tests, you must manually select the "Product > Test" menu item. This
runs not only unit tests, but UI tests as well (see section below).

It would be preferrable to run the tests automatically as part of the build, but
I am not aware how this can be achieved in Xcode 5 or later. In Xcode 4.x there
was a built-in script named "RunUnitTests" that could be invoked in a
"Run Script" build phase. In Xcode 5, however, this is no longer working, the
built-in script fails with the error message "RunUnitTests is obsolete."

See NOTES.Build for technical details about the "Unit tests" build target.

A final note about logging: The log file for unit tests run in the simulator
environment is located in
~/Library/Application Support/iPhone Simulator/Documents/Logs.


Automated UI tests
------------------
All UI test related files are located in the top-level folder "uitest".

The Xcode project defines a target "UI tests" which builds a UI test bundle.
To make the UI tests build automatically every time the main target is built,
I usually make sure that in all of my Xcode schemes the checkbox "Run" is
checked not only for the main target, but for the UI test target as well.
Note that the same result can also be achieved by a target dependency.

To run the tests, you must manually select the "Product > Test" menu item. This
runs not only UI tests, but unit tests as well (see section above).

See NOTES.Build for technical details about the "UI tests" build target.

Test strategy notes:
- There are no UI tests that check that the board is drawn correctly.
- The UIAccessibilityContainer category is used to expose model data as UI
  elements for which there ***SHOULD*** be content drawn with CoreGraphics.
  Examples:
  - The board size is exposed as a line grid UI element.
  - If a GoPoint's stone state indicates that an intersection should be occupied
    by a black stone, then a UI element for that black stone is exposed.
  - If the user preference "mark last move" is enabled, a UI element for the
    "Last move" marker is exposed.
  Whether or not the model data exposed by UIAccessibilityContainer is actually
  drawn on the screen is not tested, because that is simply not possible without
  comparing screenshots. This means that UI tests cannot detect faulty drawing
  routines. It also means that UI tests cannot detect whether zooming works
  correctly.
- There are no UI tests that check what happens to the user interface while a
  pan gesture to place a stone is in progress. For instance, there is no test
  that checks whether a blue-colored stone is displayed, and no test that checks
  the text that is displayed in the status view. The reason is that the test API
  is limited and does not allow the test code to do something while a gesture
  is in progress.

Technical notes:
- The UI testing API is layered on top of the accessibility API. The
  accessibility API is relatively simple and is described in the
  "Accessibility Programming Guide for iOS" "[1].
- UI tests launch an app and interact with the launched app via XCUIApplication.
- UI tests access UI elements through a tree of XCUIElement objects.
- As an alternative UI tests can also access locations on the screen via
  XCUICoordinate.
- XCUIElement objects are found by running queries that search the object tree.
  A query is represented by an XCUIElementQuery object. A query locates UI
  elements via their type and/or a string identifier.
- Because many UIKit classes (UIView et al.) implement default accessibility
  behaviour, UI tests can find many UI elements even though the app was not
  designed with accessibility in mind. For instance, a UILabel exposes itself
  to the accessibility layer by using its text as the accessibility label.
- UI components that are not normally accessible (e.g. things drawn in
  CoreGraphics) can be made accessible if their container overrides methods from
  the UIAccessibilityContainer category [2].

[1] https://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/iPhoneAccessibility/Introduction/Introduction.html
[2] https://developer.apple.com/documentation/uikit/accessibility/uiaccessibilitycontainer?language=objc


Test .sgf files
---------------
.sgf files mentioned in the manual testing script can be found in the folder
"sgf", which is located in the project's root folder.


Script for manual testing
-------------------------
The device name "iPhone n+" refers to any of the superior iPhone devices which
have a larger screen than regular iPhones. The first of these devices was the
iPhone 6+, later models are iPhone 6s+, iPhone 7+, etc.

Preconditions
- Perform tests on a real device, not in the simulator
- Before testing begins, remove the app bundle from the device under test so
  that all preferences and saved games from previous tests are erased
- Create a build with the "Distribute_AdHoc" configuration and install that
  build on the device
  - Via Xcode, if the device can be physically connected to the build machine.
    Disconnect the device after the build has been installed so that the tests
    are performed without Xcode being attached to the process.
  - Via ad-hoc distribution if the above is not possible. In this case, the
    device UUID must be added to the ad-hoc distribution provisioning profile
    and the provisioning profile must be installed on the device before the test
    build can be installed.
- Unless otherwise noted, tests on devices that support landscape orientation
  (iPad, iPhone n+) should be made with the device held in landscape orientation


Basic functionality to switch between UI areas of the application
- Launch application
- Briefly activate all UI areas of the application
- In the Settings area check that all user preferences use factory default
  settings
- In the Archive area check that no saved games are present
- In the Diagnostics area check that the GTP log contains no failed commands
- Go through all the documents (e.g. manual) once and check that they are
  properly displayed


Basic game play functionality
- Switch back to the Play UI area
- The following buttons are visible, either in the toolbar at the top or in a
  button box:
  - Pass
  - Computer play
  - Game info
  - More game actions
  - iPhone n+: Menu
- All buttons are enabled
- Tap the "Game info" button
- The "Game info" screen slides into view, covering the entire content of the
  Play UI area
  - The navgation bar contains a button to navigate back to the board view, and
    a segmented control with the following segments: Score, Game, Board
  - The "Score" segment is selected
- Select the "Game" segment. Check that the information presented matches the
  factory defaults:
  - No handicap
  - Board size 9
  - Komi 7.5
  - Simple ko rule
  - Area scoring
  - Life & death settling after 2 passes
  - Dispute resolution using alternating play
  - Four passes have no special meaning
  - Black player is "Anonymous"
  - White player is "Fuego (strong)"
- Tap the button that navigates back to the board view; the "Game Info" screen
  is dismissed and the game board and other UI elements of the Play UI area
  become visible
- Touch the screen & keep touching
- The stone must appear immediately directly under the fingertip
- The magnifying glass must appear above the spot where the fingertip touches
  the screen
- All interactive UI elements must be disabled while the gesture is in progress
  - iPhone: Toolbar buttons, current board position view, board position
    navigation buttons, board position list view
  - iPad: Toolbar buttons, board position navigation buttons, board position
    table view
  - Devices that support interface orientation changes: Rotation is disabled
    while the gesture is in progress
- Drag the cross-hair around the board: The status view must continuously be
  updated to show the coordinates of the current position
- Move the stone outside of the board area, then release the finger: No stone
  must be placed
- Place a stone. The computer player must immediately respond with a move, i.e.
  without a "computer is thinking" delay. This indicates that the opening book
  is present.
- The white stone is marked with the symbol for the last stone that was placed
- The "Discard" button has now become visible
- Tap the "Computer play" button. The computer must generate a move on behalf of
  black, then respond with its own move for white.
- Tap the "Pass" button. No black stone must be placed, the computer must
  respond with a move for white
- Display the "Game info" screen. The "Game" segment must already be selected.
  The "Game state" section must display updated information. Dismiss the
  "Game info" screen.
- Tap the "Discard" button repeatedly until no stones are left on the board
- Each discard must remove two moves
- When all moves have been discarded, the "Discard" button must no longer be
  visible
- Make a number of moves, with alternating moves made by the computer
- Go to "Settings > Board position" and turn off "Discard my last move"
- Tap the "Discard" button repeatedly until no stones are left on the board
- Each discard must remove one move
- Display the "Game info" view. The "Game state" section on the "Game" segment
  must show that the game has not yet started. The "move statistics" section
  must show zero moves. Dismiss the "Game info" view.
- Generate a few moves using the "Computer play" button. At some point the
  computer will start to take longer for calculating moves. The status view
  must display two distinct messages: "Computer is playing for <player name>"
  and "<player name> is thinking".
- Tap the "Computer play" button. While the computer is thinking the regular
  buttons are replaced by the "Interrupt" button
- Tap the "Interrupt" button. The computer immediately stops thinking and plays
  a move.
- Tap the "More game actions" button. A menu must appear that displays the
  following buttons: Score, Resign, Save game, New game and New game - Rematch.
  - iPhone: There is also a Cancel button.
  - iPad: The menu appears as a popover with the arrow pointing to the
    "More game actions" button
- Tap cancel (iPhone) or tap outside of the menu area (iPad). The menu must be
  dismissed without any action taking place.
- Devices that support interface orientation changes: Tap the
  "More game actions" button, then rotate the device to a different
  orientation while the "More game actions" menu is visible.
  - iPhone n+: The "More game actions" menu remains visible while the rest of
    the UI rotates in the background
  - iPad: The "More game actions" menu is dismissed automatically, then the UI
    rotates.
- Go to "Settings > Computer assistance" and switch to "Suggest move".
- When you return to the Play UI area the "Computer play" button has been
  replaced by the "Computer suggests move" button
- Tap the "Computer suggests move". While the computer is thinking
  - The status view displays a message that a move suggestion is being
    calculated
  - All other interactive elements are disabled and an "Interrupt" button is
    displayed, just like when the "Computer play" button is tapped.
- Tap the "Interrupt" button. The computer immediately stops thinking and makes
  the move suggestion.
- A stone blinks three times on the intersection where the computer suggests to
  play a stone. While the animation runs all other interactive elements are
  disabled.
- Go to "Settings > Computer assistance" and switch to "No assistance".
- When you return to the Play UI area neither the "Computer play" nor the
  "Computer suggests move" button is displayed.
- Go to "Settings > Computer assistance" and switch to "Computer play".
- When you return to the Play UI area the "Computer play" button is displayed


New game factory defaults
- Tap the "More game actions" button and select "New game"
- A modal screen pops up that lets the user enter parameters for the new
  game
- A segmented control with 3 segments is displayed at the top of the screen.
  Each segment is represented by an icon. The icons denote the following
  segments: Human vs. Computer, Human vs. Human, Computer vs. Computer
- The "Human vs. Computer" segment is selected
- For human players, "Anonymous" is pre-selected
- For computer players, "Fuego" is pre-selected
- Check that the following parameter values are in effect:
  - Computer plays white = true
  - Board size = 9
  - Ruleset = Little Go
  - Even game = True
- Open the "Advanced settings" screen and check that the following parameter
  values are in effect:
  - Komi = 7.5
  - Ko rule = Simple
  - Scoring system = Area scoring
  - Life & death settling after = 2 passes
  - Dispute resolution = Alternating play
  - Four passes = No special meaning


Illegal play
- Create a situation that allows you to try to play each of the following
  illegal moves
  - Suicide
  - Ko
  - Positional superko (load play-b-b7-for-superko.sgf then try to play at B7)
  - Situational superko (load play-b-b7-for-superko.sgf then try to play at B7)
  - Too many moves (load maximum-number-of-moves.sgf then try to play any stone
    or play a pass move)
- Try to play the respective illegal move
- The status text must indicate 1) that play is not possible, and 2) why the
  move is illegal


Basic user preferences
- Disable the "mark last move" user preference
- The last move must no longer be marked with a symbol
- Re-enable the "mark last move" user preference
- The last move must now again be marked with a symbol


Magnifying glass
- Start a new 19x19 game
- Change "Settings > Magnifying glass > Show magnifying glass" to "Auto"
- Begin the stone placing gesture
- A magnifying glass appears with a red dot in the center that indicates where
  the fingertip touches the screen
- Move the finger; the magnifying glass moves synchronously with the panning
  finger
- Move the finger outside of the grid of the Go board at the top of the board;
  the magnifying glass does not go away even when the finger leaves the grid of
  the Go board
- Move the finger towards the top of the screen; the magnifying glass veers
  towards the left to evade the fingertip
- Move the finger towards the top-left corner of the screen; the magnifying
  veers downwards to evade the fingertip
- Change "Settings > Magnifying glass > Distance from Center"
  - Closer: The magnifying glass appears closer to the fingertip than before
  - Farther: The magnifying glass appears farther away from the fingertip than
    before
- Change "Settings > Magnifying glass > Veer direction" to the value "Right",
  then start another stone placing gesture and move the finger towards the top
  of the screen. The magnifying glass now veers towards the right to evade the
  fingertip. Move the finger towards the top-right corner of the screen; the
  magnifying veers downwards to evade the fingertip.
- Change "Settings > Magnifying glass > Auto takes effect" to "Less often".
  The magnifying glass still appears.
- Start new games with decreasing board sizes until you hit a board size where
  the magnifying glass no longer appears
- Change "Settings > Magnifying glass > Auto takes effect" to "Normal".
  The magnifying glass again appears.
- Start new games with decreasing board sizes until you hit a board size where
  the magnifying glass no longer appears
- Change "Settings > Magnifying glass > Auto takes effect" to "More often".
  The magnifying glass again appears.
- Start new games with decreasing board sizes until you hit a board size where
  the magnifying glass no longer appears
- Change "Settings > Magnifying glass > Show magnifying glass" to "Always". The
  magnifying glass now appears.
- Change "Settings > Magnifying glass > Show magnifying glass" to "Never"
  - All other preferences in the "Magnifying glass" section disappear
  - The magnifying glass no longer appears
- Start a new 19x19 game; the magnifying glass does not appear
- Change "Settings > Magnifying glass > Show magnifying glass" to "Auto"
  - All other preferences in the "Magnifying glass" section re-appear
  - The magnifying glass again appears.


Sound & Vibration user preferences
- Enable the user preferences "play sound" and "vibrate"
- When running the following tests on the iPad, ignore any discussion on
  vibration feedback because the iPad does not support vibration
- Start a new human vs. human game
- Let the computer player make a move
- There must be both an audio and a vibration feedback
- Mute the device, then let the computer player make a move
- There must be no audio feedback, only a vibration feedback
- Turn off vibration in the system preferences, then let the computer player
  make a move
- There must be neither audio nor vibration feedback
- Turn the device settings back to normal so that vibration is on and the device
  is not muted. This is important for subsequent tests.
- Start a new computer vs. human game
- Make a few moves until the computer takes a few seconds to generate a move, so
  that there is sufficient time to clearly distinguish when the computer plays
  on behalf of the player, and when it makes its own move.
- Tap "Computer play"
- There must be neither audio nor vibration feedback when the computer generates
  the move on behalf of the player.
- Wait until the computer has generated its own move. Now there must be both
  audio and vibration feedback.


Save game
- Tap the "More game actions" button, then select "Save game"
- A modal screen must pop up that lets the user enter a name for the saved game
- The name is already filled in with a default name that follows the pattern
  "<black player name> vs. <white player name> 1".
- Tap cancel. The screen must disappear, and on the Archive UI area no new game
  must be visible.
- Tap the "More game actions" button, then select "save game". Clear the game
  name text field. The "Done" button must become disabled.
- Enter a name for the game, then tap "Done". On the Archive UI area a new game
  must be visible with the name you just entered
- The entry must display the date and time when the game was saved
- Save another game, this time accept the default name with the suffix "1"
- Save a third game. The default name must now have the suffix "2"
- On the Archive UI area, all three games appear sorted by file name
- Try saving a game with the character "/" in the name. An error message must be
  displayed that explains that the game name contains an illegal character.
  The message must enumerate all characters that are illegal. Tapping OK must
  dismiss the error message, the screen with the illegal game name must become
  available for editing once more.
- Try saving a game with the name that consists only of a "." (a full stop).
  Same behaviour as above, with a different error message that explains that
  the game name consists of a reserved word.


New game
- Tap the "More game actions" button and select "New game"
- A modal screen must pop up that lets the user enter parameters for the new
  game
- Select the "Human vs. human" segment
- Disable the "Even game" switch. A new cell must become visible that shows
  handicap 2.
- On the "Advanced setting" screen, komi must have been automatically
  adjusted to 0.5.
- Change scoring system to "Territory scoring". Komi must still be set to 0.5.
- Change handicap to 0. The "Even game" switch must become enabled and the
  handicap cell must disappear. Komi must be automatically adjusted to 6.5.
- Change komi to "no komi", then change scoring system to "Area scoring". Komi
  must be automatically adjusted to 7.5.
- In the "Advanced settings" screen, first set "Dispute resolution" to the
  value "Non-alternating play", then set "Life & death settling after ..."
  to the value "3 passes".
  - The "Dispute resolution" cell must be changed back to "Alternating play"
  - The "Dispute resolution" cell must become read-only, i.e. it is no longer
    possible to change its value
  - The "Four passes" cell disappears
- Set "Life & death settling after ..." to "2 passes".
  - The "Dispute resolution" cell must become read-write, i.e. it is now
    again possible to change its value
  - Also, the "Four passes" cell is shown again
- Change parameters to the following values. For all parameters, a modal
  screen must pop up that lets the user enter the new parameter value. For
  all parameters, test that the cancel button dismisses the modal screen
  without changing the value on the "new game" screen.
  - Black = Anonymous
    - On the player selection screen, only human players are available for
      selection
  - White = Anonymous
  - Board size = 13
  - Handicap = 4
  - Komi = No komi
  - Ko rule = Positional superko
  - Scoring system = Territory scoring
  - Life & death settling after = 2 passes
  - Dispute resolution = Non-alternating play
  - Four passes = End game
- When you return to the "New game" screen after changing parameter values
  on the "Advanced settings" screen, the ruleset cell shows the value
  "Custom"
- Tap cancel. The screen must disappear without a new game being started
- Again select "New game". The screen must appear with the "Human vs. human"
  segment initially being selected. All parameter values must be the same as
  when the "new game" screen was dismissed with "cancel".
- Tap "Done"
- All stones from the previous game are cleared
- The board is displayed using the new size 13x13
- 4 handicap stones are placed on the 4 corner star points
- The toolbar displays the same buttons as when the application was launched
  for the first time
- Tap the "Game info" button and check that the information displayed matches
  the parameters that were just entered
- Select "New game"
- Select handicap 9
- Select board size 7x7. Handicap must be adjusted down to 4.
- Call up the handicap screen. It is not possible to select a handicap
  greater than 4.
- Enable the "Even game" switch. The handicap cell must disappear.
- Call up the "ruleset" screen. None of the predefined rulesets is selected.
- Start selecting each of the rulesets and compare that their settings match
  the following table

                | Ko          |      |           | Life & death   | Dispute              | Four
Ruleset         | rule        | Komi | Scoring   | settling after | resolution           | passes
----------------+-------------+------+-----------+----------------+----------------------+-----------
AGA rules       | Situational | 7.5  | Area      | Two passes     | Alternating play     | Game ends
IGS rules       | Simple      | 6.5  | Territory | Three passes   | Alternating play     | n/a
Chinese rules   | Positional  | 7.5  | Area      | Two passes     | Non-alternating play | No meaning
Japanese rules  | Simple      | 6.5  | Territory | Two passes     | Non-alternating play | No meaning
Little Go rules | Simple      | 7.5  | Area      | Two passes     | Alternating play     | No meaning

- Check that on all segments where a computer player can be selected, only
  computer players are actually available for selection
- Tap cancel


New game - Rematch
- Start a new game and play a few moves
- Tap the "More game actions" button and select "New game - Rematch"
- An alert pops up informing the user that there are unsaved changes.
- Tap "No"
  - The alert is dismissed
  - No new game is started
- Tap the "More game actions" button and select "New game - Rematch"
- Tap "Yes"
  - The alert is dismissed
  - A new game is started using the same parameters as the current game
- Play a few moves, then save the game
- Tap the "More game actions" button and select "New game - Rematch"
  - No "unsaved changes" alert pops up
  - A new game is started using the same parameters as the current game


End of game: Resigning
- Start a new human vs. human game with no handicap and the "Little Go" ruleset
- Place a black and a white stone
- Make sure that the "Auto scoring / resuming play" user preference is enabled
- Tap the "More game actions" button and select "Resign".
- Scoring mode is not activated. The toolbar displays the "Scoring" and the
  "Discard" buttons. The status view displays "Black resigned".
- Display the "Game info" view. The "Game state" section on the "Game" segment
  must show that the game has ended. Dismiss the "Game info" view.
- Tap the "Scoring" button. This activates scoring mode. The toolbar now
  displays the "Play" and the "Discard" buttons.
- Tap the "Play" button. This deactivates scoring mode and returns to play mode.
  The toolbar now displays the "Scoring" and the "Discard" buttons.
- Tapping the "More game actions" button reveals a menu with these game actions:
  Undo resign, Save game, New game
- Select "Undo resign" from the "More game actions" menu
- The toolbar again displays the three buttons "Pass", "Computer play" and
  "Discard"
- Display the "Game info" view. The "Game state" section on the "Game" segment
  must show that the game is in progress. Dismiss the "Game info" view.
- Tap the "More game actions" button and select "Resign"
- Tap "Discard"
- The toolbar again displays the three buttons "Pass" , "Computer play" and
  "Discard"
- Display the "Game info" view. The "Game state" section on the "Game" segment
  must show that the game is in progress. Dismiss the "Game info" view.


End of game: Two pass moves, alternating play
- Start a new human vs. human game with no handicap and the "Little Go" ruleset
- Enable "Settings > Scoring > "Auto scoring / resuming play"
- Place a black and a white stone, then make a black and a white pass move
- Scoring mode is now activated. The status view displays a message "Scoring in
  progress" while the initial set of dead stones is determined.
- After the initial set of dead stones has been determined, the status view
  displays scoring information, and the toolbar displays the "Play" and
  "Discard" buttons
- Display the "Game info" view. The "Game state" section on the "Game" segment
  must show that the game has ended. Dismiss the "Game info" view.
- Tapping the "More game actions" button reveals a menu with these game actions:
  Start marking as seki, Resume play, Save game, New game
- Select "Save game" and save another game, which must appear on the
  Archive UI area
- Tap the "Play" button
- Play mode is activated and play is resumed automatically:
  - The scoring markup disappears from the board
  - The toolbar now displays the "Pass", "Computer play" and "Discard" buttons
  - The status view message is "White passed. Black to move."
  - The "More game actions" menu contains the items "Score", "Resign",
    "Save game" and "New game"
  - In the "Game info" view, the "Game state" item on the "Game" segment must
    show "Resumed play"
- Tap "Discard", then make a white pass move. Scoring mode is automatically
  activated.
- Tap "More game actions", then select the "Resume play" item. Play mode is
  activated and play is resumed. See above for the conditions that must apply.
- Tap "Discard", then make a white pass move. Scoring mode is automatically
  activated.
- Disable "Settings > Scoring > "Auto scoring / resuming play"
- Tap the "Play" button
- Play mode is activated but play is NOT resumed automatically:
  - The scoring markup disappears from the board
  - The toolbar now displays the "Scoring" and "Discard" buttons
  - The status view message is "Game has ended by two consecutive pass moves."
  - The "More game actions" menu contains the items "Resume play", "Save game"
    and "New game"
  - In the "Game info" view, the "Game state" item on the "Game" segment must
    show "Game has ended"
- Tap the "Scoring" button
- Scoring mode is activated again, with the same effects as described above
- Tap the "Play" button. Play mode is activated.
- Tap "Discard"
- The toolbar again displays the three buttons "Pass", "Computer play",
  and "Discard"
- The status view message is "Black passed. White to move."
- Display the "Game info" view. The "Game state" section on the "Game" segment
  must show that the game is in progress. Dismiss the "Game info" view.
- Make a white pass move
- Scoring mode is not activated. The toolbar displays the "Scoring" and
  "Discard" buttons
- Display the "Game info" view. The "Game state" section on the "Game" segment
  must show that the game has ended. Dismiss the "Game info" view.
- Tap "Discard"
- The toolbar again displays the three buttons "Pass", "Computer play" and
  "Discard"
- Display the "Game info" view. The "Game state" section on the "Game" segment
  must show that the game is in progress. Dismiss the "Game info" view.


End of game: Two pass moves, non-alternating play
- Start a new human vs. human game with no handicap and the "Chinese" ruleset
- Disable "Settings > Scoring > "Auto scoring / resuming play"
- Place a black and a white stone, then make a black and a white pass move
- The game ends, but scoring mode is not activated
- Tap "More game actions", then select the "Resume play" item. An alert is
  displayed that asks the user to choose a side to play first. The default is
  "Black".
- Select "Black"
- Play is resumed. The status view message is "White passed. Black to move."
- Place a black stone, then make a white and a black pass move
- The game ends, but scoring mode is not activated
- Tap "More game actions", then select the "Resume play" item. This time, the
  alert that asks the user to choose a side to play first has "White" as the
  default
- Select "White"
- Play is resumed. The status view message is "Black passed. White to move."
- Tap "More game actions". The menu contains an item "Set black to move".
- Select "Set black to move"
- The status view message is "Black passed. Black to move.".
- In the "Game info" view, the "Next move" item on the "Game" segment must
  show "Black"
- Tap "More game actions". The menu contains an item "Set white to move".
- Select "Set white to move"
- The status view message is "Black passed. White to move."
- Tap "More game actions", then select the "Set black to move" item
- Place a black stone
- Check the list of board positions: The last two moves must be both by black.
- Tap "More game actions". The menu does not contain an item that allows to set
  the side to move.
- Tap "Discard"
- The status view message is "Black passed. White to move.".
- Tap "More game actions". The menu contains an item "Set black to move".


End of game: Three pass moves
- Start a new human vs. human game with no handicap and the "IGS (Pandanet)"
  ruleset
- Enable "Settings > Scoring > "Auto scoring / resuming play"
- Place a black and a white stone, then make a black and a white pass move
- The game does not end
- Make a third pass move by black
- The game ends, scoring mode is activated
- Tap "More game actions". The menu does not contain the "Resume play" item.
- Tap the "Play" button
- Play mode is activated but play is NOT resumed automatically
- Tap "More game actions". The menu does not contain the "Resume play" item.
- Tap "Discard"
- Play is resumed. The toolbar again displays the three buttons "Pass",
  "Computer play", and "Discard"


End of game: Four pass moves
- Start a new human vs. human game with no handicap and the "AGA" ruleset
- Enable "Settings > Scoring > "Auto scoring / resuming play"
- Place a black and a white stone, then make a black and a white pass move
- The game ends, scoring mode is activated
- Tap "More game actions", then select the "Resume play" item
- Play mode is activated and play is resumed
- Make another black and a white pass move
- The game ends, scoring mode is activated
- The status view message is "White wins by 7½ - All stones on the board are
  deemed alive."
- Tapping a stone has no effect, i.e. stones cannot be marked as dead
- Tap "More game actions". The menu contains only the items "Save game" and
  "New game". It specifically does not contain the items "Start marking as seki"
  or "Resume play".
- Tap the "Play" button
- Play mode is activated but play is NOT resumed automatically
- Tap "More game actions". The menu does not contain the "Resume play" item.
- Tap "Discard"
- Play is resumed. The toolbar again displays the three buttons "Pass",
  "Computer play", and "Discard"


Human vs. human game / Handicap
- Enable "Settings > Scoring > "Auto scoring / resuming play"
- Start a new human vs. human game with board size 19 and handicap 4
- Place a stone; because of the handicap, the stone must be white
- The computer does not respond with a move because a human vs. human game is
  in progress
- Place a stone; it must be a black stone
- Tap "Computer play". The computer must generate one move for white
- There must be both audio and vibration feedback when the computer generates
  the move (iPad: no vibration feedback)
- Place a stone; it must be a black stone
- Place a few more stones and capture a stone group; the stone group must
  disappear when it is captured
- Tap "Pass". The status view must display the message "<color> has passed"
- Disable the user preference "Find dead stones"
- Tap "Pass"
- The game ends and the score is displayed immediately, i.e. no delay because
  the GTP engine tries to find dead stones


Computer vs. computer game
- Select "New game"
- On the "Computer vs. computer" segment, assign "Fuego" to play
- When the game is started, the computer players immediately start generating
  moves
- At no time during a computer vs. computer game there must be any audio or
  vibration feedback when the computer generates moves
- The toolbar displays the following buttons
  - Pause
  - Interrupt
  - Game info
  - More game actions
  - iPhone n+: Menu
- The "Pause", "Interrupt" and "Menu" buttons are enabled, the "Game info" and
  "More game actions" buttons are disabled
- Tap "Pause"
- The "Pause" button is replaced by the "Continue" button
- The current computer player finishes calculating its move
- During that time, the status view still displays "<player name> is thinking"
- Once the computer player has finished generating its move, the following
  happens
  - The "Interrupt" button is replaced by the "Discard" button
  - The "Game info" and "More game actions" buttons become enabled
  - No new move is generated
- Tap "Game info"; the game state is now displayed as "game is paused"; dismiss
  the "Game info" view
- Tap "Continue"
- The computer player immediately starts to generate a move
- Tap "Interrupt"
- The computer player immediately plays its move, then immediately starts to
  generate another move
- Tap pause, immediately followed by a tap on "Continue"
- The game continues uninterrupted
- Tap "Pause"
- Tap "More game actions" as soon as it becomes available. The menu must not display
  "Resign". Dismiss the menu.
- Tap "Discard"
- The most recent move is discarded
- Discard all moves. When all moves have been discarded, the "Discard" button
  must no longer be visible.
- Tap "Continue". The computer starts to generate moves.
- Lock the device, then unlock the device
- The game must now be paused
- Lock the device while the game is still paused, then unlock the device
- The game must still be paused


Board position
- Start a new computer vs. human game where the computer plays white and the
  game uses a handicap
- Make a few moves until the computer actually requires some time to make its
  move. Whenever the computer player is thinking, any controls that allow to
  change board positions must be disabled or have no effect when tapped. This
  includes
  - Navigation buttons
  - Board position list
- When the computer player has generated its move
  - Buttons that allow to view earlier board positions must be enabled
  - Buttons that allow to view later board positions must be disabled
- iPhone (regular, not iPhone n+): Tap the current board position view
  several times. On each tap the toolbar switches between the board position
  navigation buttons and the board position list.
- Display the "Game info" view. Dismiss the "Game info" view after checking the
  following information on the "Board" segment:
  - Board position and move info refer to the correct move
  - 0 (zero) moves follow after the current position
  - The footer text indicates that the board position after the most recent move
    is currently displayed.
- The status view displays "White played <vertex>. Black to move"
- Go back one move. No progress HUD is displayed.
- Buttons that allow to view later board positions must now be enabled.
- The status view displays "Black played <vertex>. White will play <vertex>"
- The "Pass" button must be disabled (because it is the computer player's turn)
- The next move marker "A" is displayed at the intersection where in the next
  board position a stone will be placed
- Disable the "Mark next move" user preference
- The next move marker "A" is no longer displayed
- Re-enable the "Mark next move" user preference
- The next move marker "A" is again displayed
- Display the "Game info" view. Dismiss the "Game info" view after checking the
  following information on the "Board" segment:
  - Board position and move info refer to the correct move
  - 1 (one) move follows after the current position
  - The footer text indicates that a board position in the middle of the game is
    currently displayed.
- Try to make a move by panning. Nothing happens.
- Go back one move. No progress HUD is displayed.
- The status view displays "White played <vertex>. Black will play <vertex>"
- The "Pass" button must be enabled
- Make a move by panning. An alert must be displayed that informs the user that
  all future moves will be discarded.
- Cancel the move. The move must not be played.
- Tap "Pass", "Computer play" and "Discard". For each tap an alert must be
  displayed that informs the user that all future moves will be discarded. When
  the "Discard" button is tapped, the wording is slightly different. Cancel each
  of the alerts.
- Make a move by panning. This time when the alert is displayed confirm that
  you want to make the move. The following must happen:
  - The move must be played
  - The computer player must immediately respond with a move
  - When the computer player has generated its move, buttons that allow to view
    later board positions must be disabled, buttons that allow to view earlier
    board positions must be enabled.
- Turn off the "Discard future moves alert" in the user preferences
- Repeat the following steps for 1) making a move by panning, 2) tapping "Pass",
  and 3) tapping "Computer play":
  - Go back two moves
  - Take the action that makes the move
  - This time no alert is displayed, the move is just played and the same
    sequence of events occurs as before when the alert was displayed.
- Go back to the beginning of the game. Only the handicap stones are displayed.
  Buttons that allow to view earlier board positions must be disabled.
- The status view displays "Game started. White will play <vertex>"
- Display the "Game info" view. Dismiss the "Game info" view after checking the
  following information on the "Board" segment:
  - Board position refers to "start of game"
  - Move info is "n/a"
  - Correct number of moves that follow after the current position
  - The footer text indicates that the board position representing the beginning
    of the game is currently displayed
- Go forward one move. All navigation buttons must be enabled.
- Tap the "Discard" button. All moves are discarded. The "Discard" button is
  no longer visible. The "Pass" button is visible but disabled (because it is
  the computer player's turn). The "Computer play" button is visible and
  enabled. The next move marker "A" is not displayed.
- Tap the "Computer play" button
- The "Discard" button is visible and enabled
- Go back to the beginning of the game. The next move marker "A" is displayed.
- Tap the "Discard" button. All moves are discarded. The same buttons are
  visible and in the same enabled state as in the previous test where all moves
  were discarded. The next move marker "A" is not displayed.
- Tap the "Computer play" button, then tap "Pass", then wait until the computer
  has generated its move
- Go back 2 moves. The next move marker "A" is not displayed because the next
  move is a pass move.
- Generate more than 10 moves (to make this quicker, start a new game with
  "Fuego (weak)" as the computer player)
- Scroll to the beginning of the board position list, then select the board
  position that represents the beginning of the game (must be more than 10
  board positions away from the end of the game)
- The progress HUD is displayed while the app updates the board to display
  the beginning of the game
- Suspend the application
- Kill the application
- Launch the application. The progress HUD is displayed without interruption.
  The HUD displays progress for each of the three phases:
  - Launch
  - Restore game
  - Restore board position
- After application launch is complete, the board displays the board position
  at the beginning of the game
- Start a new human vs. human game with ruleset "Chinese", make two pass
  moves, then resume play. 
- An alert is displayed that asks the user to choose a side to play first. The
  default is "Black".
- Choose "White". The status view displays "White passed. White to move."
- Make a pass move. The status view displays "White passed. Black to move."


Zooming/scrolling, coordinates and move number
- Enable the "Mark last move" user preference
- Enable the "Display coordinates" user preference
- Set the slider of the "Display move numbers" user preference to its maximum
  value
- From the Archive UI area, load the ear-reddening game (human vs. human game)
- iPad
  - Coordinate labels are displayed
  - Move numbers are displayed for all stones
  - The last move number (325) is displayed in red
- iPhone n+
  - Coordinate labels are displayed
  - Move numbers are not displayed
  - The last move is marked up with a symbol
- iPhone
  - Neither coordinate nor move numbers are displayed
  - The last move is marked up with a symbol
- Double tap. The board is zoomed in.
- iPhone n+
  - Move numbers are now displayed for all stones (scroll around the board
    for verification)
  - The last move number (325) is displayed in red
- iPhone
  - Coordinate labels are now displayed
  - Move numbers are still not displayed
- Double tap. The board is zoomed in again.
- iPhone
  - Move numbers are now displayed for all stones (scroll around the board
    for verification)
  - The last move number (325) is displayed in red
- Scroll around. The coordinate labels stick to the left/upper edge of the
  screen, but scroll together with the horizontal/vertical scroll direction so
  that they are always centered on the grid lines they are labelling.
- From the Archive UI area, load the "9x9_1" game or any other 9x9 game
  (human vs. human game)
- When the game has finished loading, the board is still zoomed in to the same
  zoom scale as before
- Touch two fingers. The board is zoomed out.
- Pinch to zoom in. Zooming stops at a certain maximum.
- Pinch to zoom out until the board is at its normal size
- iPhone n+: Move numbers are shown because we are now on a 9x9 board.
- iPhone: Both move numbers and display coordinates are shown because we are
  now on a 9x9 board.
- In the "Display" settings, disable coordinate labels
- Back on the Play UI area, coordinate labels are now hidden
- In the "Display" settings, reduce the move numbers slider to half position
- Back on the Play UI area, move numbers 41-80 are displayed, move numbers 1-40
  are not displayed
- Go to board position 40
- Move numbers are displayed for all the stones (move numbers 1-40)
- Go to board position 41
- Move number 1 is no longer displayed


Player influence
- Start a new computer vs. human game and make a few moves
- Enable the user preference "Display player influence"
- No player influence is displayed after you switch back to the Play UI area
- Tap the "More game actions" button. The menu that pops up must contain an entry
  "Update player influence"
- Select the menu entry
- Fuego takes a few seconds to calculate, then the player influence is displayed
- Make a few moves. Player influence is updated after each move
- Select the board position at the beginning of the game
- Player influence is not updated and remains the same
- Select "Update player influence" from the "More game actions" menu
- Player influence disappears
- Select the board position that represents the most recent move
- No player influence is displayed
- Select "Update player influence" from the "More game actions" menu
- Fuego takes a few seconds to calculate, then the player influence is displayed
- Enable scoring mode
- Player influence disappears
- Tap the "More game actions" button. The menu that pops up must not contain the
  "Update player influence" entry
- Disable scoring mode
- Player influence re-appears
- Tap the "More game actions" button. The menu that pops up must contain the
  "Update player influence" entry
- Disable the user preference "Display player influence"
- No player influence is displayed after you switch back to the Play UI area
- Tap the "More game actions" button. The menu that pops up must not contain the
  "Update player influence" entry


Players & profiles
- Start a new computer vs. human game with players "Anonymous" and
  "Fuego (strong)"
- Navigate to the Players preferences screen
- The screen shows the following content
  - A list of all human and computer players that exist
  - A cell "Add new player" in both player sections
  - A cell "Human vs. human games"
  - A cell "Reset to defaults"
- Tap "Add new player" in the human players section. A screen that allows to
  enter data for a new player is shown. The "Human" switch is set to on.
  Tap cancel.
- Tap "Add new player" in the computer players section. A screen that allows to
  enter data for a new player is shown. The "Human" switch is set to off.
  Tap cancel.
- Tap the edit button
- The "Add" cells are marked up with an icon
- Deleteable players and profiles are marked up with an icon
- Only the "Fuego (weak)" and "Fuego (extra strong)" players can be deleted
- Leave the screen, then come back. Edit mode must now be disabled.
- iPad and iPhone (not iPhone n+) only
  - Tap edit
  - Start a new game while the Players preferences screen remains in
    edit mode
  - Return to the Players preferences screen. Edit mode must now be
    disabled
- Tap edit
- Add a new human player
- The "create" button must be disabled until you enter at least 1 character for
  the player name
- Turn the "human player" switch off
- Controls must now appear that let the user edit playing strength, resign
  behavior, and notes. The playing strength is 3 (the default).
- Change playing strength to 5
- Turn the "human player" switch on
- The computer player specific controls disappear again.
- Turn the "human player" switch off
- The computer player specific controls appear again. The playing strength is
  back to 3.
- Create the player using the name "foo".
- Display the "new game" screen. On all segments where a computer player can be
  selected, select the player "foo".
- Tap "cancel"
- Delete the player "foo"
- Display the "new game" screen
  - On all segments where a computer player can be selected, the pre-selected
    player is shown as "no player selected" in red color
  - The "Done" button is enabled on the "Human vs. human" segment, and
    disabled on all other segments
  - One of the remaining computer players "Fuego (strong)" and "Fuego (weak)"
    can be selected.
- Start a new human vs. human game
- Delete all computer players
- Edit the "Human vs. human games" profile and change the playing strength to 1
- Tap "Reset to defaults"
- An alert must be displayed that asks the user for confirmation
- Tap cancel. No changes are made.
- Tap "Reset to defaults", but this time accept. All players as well as the
  settings of the "Human vs. human games" profile are reset to their defaults.


Archive, document interaction
- On the Archive UI area, select an entry from the list of saved games
- The detail view displays the same information as the table view entry, plus
  a "Load" and a "Document interaction" button
- Tap the game name cell
- A modal edit screen must appear which allows to change the save game name
- Delete all characters; the "Done" button must be disabled
- Tap cancel; the edit screen must disappear without a change taking place
- Again, tap the game name cell
- Change the game name and tap done
- The detail view must display the new name
- Navigate back to the main archive view; the new name must appear there as
  well
- Tap the edit button
- All saved games can be deleted
- Delete one of the games
- Tap done
- Using iTunes, upload an .sgf file to the device and download the .sgf files
  already in the archive from the device
- After each upload lock & unlock the device, then check that the archive view
  has updated itself
- On the archive view, select one of the saved games
- Tap the "Document interaction" button
- A menu opens that offers to export the .sgf file to the following desintations
  - Mail
  - Pasteboard
  - Pandanet Go (if installed)
  - Drop Box (if installed)
- Select Mail, then proceed to send the email with the attached file to your
  own address
- Check your email inbox that you received the message
- Open the message, tap the attached .sgf file
- A menu opens that offers to export the .sgf file 1) to Little Go, and 2) to
  the same destinations (except the pasteboard) that were available when
  exporting from Little Go above
- Select Little Go
- Little Go launches and informs the user that the game was imported
- Import the same .sgf again
- The name of the imported game is adjusted so that it remains unique
- Start a new game and play a few moves so that the current game in progress
  has unsaved changes
- Select Ear-reddening game.sgf, then tap the "Load" button
- The "Load game" screen is displayed. The screen is almost identical to the
  regular "New game" screen, with the following exceptions:
  - None of the segments allows to set the board size
  - None of the segments allows to set the handicap
  - The "Advanced settings" screen does not allow to set komi
- Tap "Cancel". The screen is dismissed and the game is not loaded.
- Tap the "Load" button. The "Load game" screen is displayed with the same
  segment and the same settings as before.
- Tap the "Done" button. A confirmation alert that warns the user that the
  current game has unsaved changes
- Tap the "Cancel" button. The alert is dismissed and the "Load game" screen
  is displayed again.
- Tap the "Done" button. This time confirm that the game should be loaded.
- A progress bar / HUD indicates the load status
- After the game is loaded the Play UI area must be visible
- Don't make any moves, directly load another game from the archive. This
  time there is no alert warning about unsaved changes, the game is simply
  loaded and the previously running game is discarded.
- Load a game in the following situations:
  - While the game has ended (e.g. by two pass moves): A new game must be
    started and all appropriate toolbar buttons must be enabled after the
    game has finished loading.
  - iPad and iPhone (not iPhone n+) only: While the "Game info" view is
    visible: The "Game info" view must be dismissed after the game has
    finished loading.
  - While scoring mode is enabled: Scoring mode must be disabled after the game
    has finished loading.
- Start a new human vs. human game with 7x7 board size, no handicap and
  Chinese ruleset, then load handicap-7-komi-0-with-pass-moves.sgf as a
  human vs. computer game with AGA ruleset, then call up the "New game"
  screen. The new game screen must initially display the
  "human vs. computer" segment with the following settings
  - Same player selection as when the .sgf was loaded
  - Board size 7x7 (i.e. the board size that was used when a new game was
    started the last time; the board size from the .sgf is not remembered)
  - AGA ruleset (i.e. the ruleset used when the game was loaded)
  - No handicap (i.e. the handicap setting that was used when a new game
    was started the last time; the handicap setting from the .sgf is not
    remembered)
  - Komi 7.5 (i.e. the komi setting that matches the ruleset; the komi setting
    from the .sgf is not remembered)
- Try loading the following saved games. Where not specified otherwise, use the
  "Little Go" ruleset and a human vs. human game. When a game cannot be loaded,
  dismissing the error message must still result in a new game being started.
  - handicap-7-komi-0-with-pass-moves.sgf: The game can be loaded. Check that
    the content of the game is correctly restored (handicap 7, komi 0, both
    stone placement moves and pass moves).
  - Ear-reddening game.sgf: The game can be loaded. The game contains 325
    moves, i.e. a large number of moves.
  - 9x9_1.sgf: The game can be loaded. The game contains a board size that is
    not 19x19.
  - TODO: An .sgf file that contains a game where one of the players
    resigned. Currently such a file can be loaded, but the resignation
    status is not recognized, due to a limitation in Fuego.
  - 2-passes.sgf: The game can be loaded. The game has ended.
  - 3-passes.sgf: The game can be loaded. The game is still in progress.
  - 3-passes.sgf, with ruleset "IGS (Pandanet)": The game can be loaded. The
    game has ended.
  - 4-passes.sgf: The game can be loaded. The game has ended.
  - 4-passes.sgf, with ruleset "IGS (Pandanet)": The game cannot be loaded. An
    error message is displayed that explains the reason (a pass move is made
    after the game has already ended).
  - 4-passes.sgf, with ruleset "AGA": The game can be loaded. The game has
    ended. The status view shows a message that "all stones on the board are
    deemed alive".
  - 5-passes.sgf: The game can be loaded. The game is still in progress.
  - 5-passes.sgf, with ruleset "IGS (Pandanet)": The game cannot be loaded. An
    error message is displayed that explains the reason (a pass move is made
    after the game has already ended).
  - 5-passes.sgf, with ruleset "AGA": The game cannot be loaded. An error
    message is displayed that explains the reason (a pass move is made after the
    game has already ended).
  - non-alternating-play.sgf: The game can be loaded. Make sure that in the
    list of board positions the positions 44 and 45 are both moves made by
    white.
  - suicide.sgf: The game cannot be loaded. An error message is displayed that
    explains the reason (suicide).
  - illegal-move.sgf: The game cannot be loaded. An error message is displayed
    that explains the reason (white plays on an intersection that is already
    occupied).
  - positional-superko.sgf, with simple and situational superko rules (rulesets
    "Little Go" and "AGA", respectively): The game can be loaded
  - positional-superko.sgf, with positional superko rule (ruleset "Chinese"):
    The game cannot be loaded.
  - situational-superko.sgf with simple ko rule (ruleset "Little Go"): The game
    can be loaded.
  - situational-superko.sgf with positional and situational superko rules
    (rulesets "AGA" and "Chinese", respectively): The game cannot be loaded.
  - not-an-sgf-file.sgf: The game cannot be loaded. An error message is
    displayed that explains the reason (no SGF data found).
  - 25x25_single_black_move.sgf: The game cannot be loaded. An error message is
    displayed that explains the reason (board size is not supported).
  - too-many-moves.sgf. The game cannot be loaded. An error message is
    displayed that explains the reason (game contains too many moves).
  - not-enough-handicap-stones.sgf: The game cannot be loaded. An error message
    is displayed that explains the reason (not enough handicap stones are set
    up).
  - setup-manipulates-handicap.sgf. The game cannot be loaded. An error message
    is displayed that explains the reason (handicap stones are changed after
    being set up).
  - setup-after-first-move.sgf. The game cannot be loaded. An error message is
    displayed that explains the reason (stone setup appears after first move).
  - setup-player-after-first-move.sgf. The game cannot be loaded. An error
    message is displayed that explains the reason (player setup appears after
    first move).
  - encoding-detection-fails.sgf. The game cannot be loaded. An error message is
    displayed that explains the reason (character encoding failed).
  - encoding-multiple.sgf. The game cannot be loaded. An error message is
    displayed that explains the reason (SGF data contains multiple character
    encodings).
  - encoding-unsupported.sgf. The game cannot be loaded. An error message is
    displayed that explains the reason (unsupported or unknown character
    encoding).
- The following tests may be difficult to perform with modern devices that
  can load games faster than a human tester is able to interfere
- Load a game, then press the Home button in the middle of the loading process
- Launch the application. The loading process must continue.
- Load a game, then press the Home button in the middle of the loading process
- Kill the application
- Launch the application. The loading process is not continued. Instead, a new
  game is started with the most recent "new game" settings (the players are
  those from the most recent attempt to load a game)


Scoring
- Load game 9x9_1.sgf with territory scoring
- Check that the following scores are present on the "Game info" view
    Black             White
      -      Komi       0
      6    Captured     9
     n/a     Dead      n/a
     n/a   Territory   n/a
      6      Score      9
        White wins by 3
- The footer on the "Score" segment of the "Game info" view indicates that some
  scores are not available because scoring mode is not enabled
- Turn off the user preference "find dead stones"
- Turn on scoring mode
- Check that the following scores are present on the "Game info" view
    Black             White
      -      Komi       0
      6    Captured     9
      0      Dead       0
      2    Territory   12
      8      Score     21
       White wins by 13
- There is no footer message on the "Score" segment of the "Game info" view
- Tap white stone at E1
- The white stone group that includes E1 is marked as dead
- Two empty regions (one including G1, the other including G3) are marked as
  inconsistent territory
- In the user preferences, select different markup styles for inconsistent
  territory and check that the styles are correctly applied
- Turn on the user preference "mark dead stones intelligently"
- Tap white stone at J3
- In addition to the stone at J3, two additional white stone groups (one
  including G4, the other including G6) are also marked as dead
- The overall score is now "Black wins by 37"
- Tap white stone at E1
- The 4 white stone groups now marked as dead are all turned back to alive
  status
- Select board position for move 74 (white plays A9, captures 1 stone)
- The overall score is now "White wins by 17"
- Check that the following scores are present on the "Game info" view
    Black             White
      -      Komi       0
      3    Captured     8
      0      Dead       0
      1    Territory   13
      4      Score     21
       White wins by 17
- The footer on the "Score" segment of the "Game info" view indicates that the
  score does not reflect the final score of the game
- Turn off scoring mode, then go to the board position at the beginning of the
  game
- The overall score in the "Game info" view is now "Game is a tie"
- The footer on the "Score" segment of the "Game info" view indicates both
  1) that the score does not reflect the final score of the game; and 2) that
  scoring mode is disabled
- Load game seki-9b.sgf with area scoring
- Turn on scoring mode
- The status text must read "White wins by 6.5 - Tap to mark dead stones".
- Tap the "More game actions" button. The menu must contain an item
  "Start marking as seki". Select that item.
- The status text must read "White wins by 6.5 - Tap to mark stones in seki".
- Tap black stone at A6
- The stone group that includes A6 is marked as in seki
- The empty region including C7 is marked as inconsistent territory
- Tap white stone at D6
- The stone group that includes D6 is marked as in seki
- The empty region including C7 is marked as neutral territory
- The overall score is now "White wins by 6.5"
- Check that the following scores are present on the "Game info" view
    Black             White
      -      Komi       6.5
      -    Handicap     0
     10     Stones     10
      1    Territory    1
     11      Score     17.5
       White wins by 6.5
- Load game seki-9b.sgf with territory scoring, then repeat the steps that mark
  stones as in seki
- Check that the following scores are present on the "Game info" view
    Black             White
      -      Komi       6.5
      0    Captured     0
      0      Dead       0
      0    Territory    0
      0      Score      6.5
       White wins by 6.5
- Start a new human vs. human game game with ruleset "AGA"
- Place a black and a white stone
- Make a black and a white pass move
- The game ends and scoring mode is activated
- Tap the black stone to verify that it is marked as dead stone
- Tap the white stone to verify that it is marked as dead stone
- Resume play, then make another black and a white pass move
- The game ends and scoring mode is activated
- Tapping the black or white stone has no effect, i.e. stones cannot be marked
  as dead. Also, the "More game actions" menu does not contain the
  "Start marking as seki" entry.


Suspending the app
- Load a game that has a few moves
- Press the Home button; the application is put into the background
- Reactivate the application; the same game state that was used when the app
  was last active is displayed again
- Change a few user preferences
- Press the Home button; the application is put into the background
- Kill the application
- Start the application
- On startup a game is loaded, restoring the same game state that was used when
  the app was last active
- Changed user preferences are also restored


Interface orientation (general)
- Rotate the device to portrait, switch to the "Settings" area of the app,
  rotate the device to landscape, then switch back to the "Play" area. The UI
  in the "Play" area has changed to landscape orientation. It is acceptable if
  the UI change is visible to the user at the moment the UI area is changed.


Interface orientation (iPad only)
- Launch the app in landscape
- The board is sized to fit the screen vertically, and is centered horizontally
- The toolbar above the board does not contain a "Moves" button
- On the left of the screen on the Play UI area there is a pane that contains
  the following UI elements:
  - Navigation bar with buttons to select board positions
  - Single-cell table view that displays the current board position
  - Table view with all board positions of the game
- Scroll to the top, then to the bottom of the list of board positions to make
  sure that the first and last board positions are visible
- Rotate the device to portrait
- The UI changes as follows
  - The board is resized to fit the screen horizontally, and is centered
    vertically
  - The toolbar above the board now contains a "Moves" button
  - The pane on the left that contains board position UI elements disappears
- Swipe from left to right [not possible until issue 238 is resolved]
- The pane that contains board position UI elements slides in from the left
- Scroll to the top, then to the bottom of the list of board positions to make
  sure that the first and last board positions are visible
- Select a different board position
- The board is updated in the background
- Tap anywhere outside of the pane
- The pane disappears
- Tap the "Moves" button
- The pane that contains board position UI elements slides in from the left
- Select a different board position
- The board is updated in the background
- Tap anywhere outside of the pane
- The pane disappears
- Zoom the board
- Swipe from right to left [test does not make sense until issue 238 is
  resolved]
- The board scrolls
- Rotate the device to landscape
- Scroll to the top, then to the bottom of the list of board positions to make
  sure that the first and last board positions are visible
- Rotate the device to portrait
- Tap the "Moves" button
- Rotate the device to landscape
- Scroll to the top, then to the bottom of the list of board positions to make
  sure that the first and last board positions are visible
- Scroll the board to make sure that the scroll gesture is recognized


iPhone n+ layout
- Launch app in portrait
- The UI differs from the UI of smaller iPhones like this:
  - The toolbar at the top of the screen contains a "Menu" button on the right
  - Below the game board are the following elements, arranged from top to
    bottom:
    - A button box that contains the board position navigation buttons
    - A list with board positions that is horizontally scrollable
    - The status view
- Tap the "Menu" button. The main menu view appears that lists all the UI areas
  of the app. The main menu view has a title bar with a title "Main Menu" and a
  back button "Play".
- Check that each UI area can be activated, and that it is possible to return
  from each UI area to the list of UI areas.
- Dismiss the main menu
- Rotate the device to landscape
- The UI differs from the UI of smaller iPhones like this:
  - On the left-hand side of the screen is a list with board positions that is
    vertically scrollable
  - Below the list with board positions is the status view
  - On the left and right of the game board are two button boxes
    - On the left: A button box that contains the board position navigation
      buttons
    - On the right: A button box that contains the toolbar buttons, with two
      permanent buttons (Game Info, More Game Actions) at the bottom, and above
      all the remaining buttons
  - The "Menu" button is in the top-right corner of the screen
- Tap the "Menu" button. The main menu view appears that lists all the UI areas
  of the app. The main menu view has a title bar with a title "Main Menu" and a
  back button "Play".
- Check that each UI area can be activated, and that it is possible to return
  from each UI area to the list of UI areas.
- Make sure that you are viewing the list of UI areas
- Rotate the device to portrait. The list of UI areas rotates correctly.
- Dismiss the main menu. The Play UI area is shown with the layout for portrait.
  It is acceptable if the transition from landscape to portrait layout is
  briefly visible.
- Tap the "Menu" button, rotate the device to landscape, then dismiss the main
  menu. The Play UI area is shown with the layout for landscape. Again, it's
  acceptable if the UI update is briefly visible.
- iOS 7 only
  - Tap the "Menu" button
  - Start a drag gesture by dragging from the left edge of the screen towards
    the right. The Play UI area gradually becomes visible the farther you drag.
  - Cancel the gesture by lifting the finger before more than half of the screen
    is covered by the Play UI area. The main menu view slides back into place.
    The title bar with the view title and the back button (which were temporarily
    hidden during the drag gesture) are visible again.
- iOS 8 and newer
  - Tap the "Menu" button
  - Try to start a drag gesture by dragging from the left edge of the screen
    towards the right. The gesture has no effect.


Tab functionality (on those devices that use a tab bar)
- Dismissing "Game info" view
  - Go to Play area
  - Tap the "Game info" button
  - Tap the "Play" tab bar button. This must dismiss the "Game info" view, just
    as if the "back" button had been tapped


Special test cases
- Disable UI rotation while stone is being placed
  - This test is possible only on a device where the app supports UI rotation
  - Start a gesture to place a stone
  - Rotate the device while the gesture is still in progress
  - The UI must not rotate
  - End the stone placing gesture
  - Rotate the device
  - The UI must rotate


Board setup and player setup tests when loading an .sgf
- The following table lists a set of .sgf files that are used to test the app's
  behaviour in regard to various board setup and player setup combinations.
- The table lists the basic characteristics of each file, together with the
  file's specific test goals.
- The entire set of .sgf file also fulfills combinatorial test goals. For
  instance, board setup must work regardless of whether or not moves are
  present in the file, or whether player setup is also present in the file.
  Usually these combinatorial test goals are not explicitly mentioned.


File      Board   Player
name      setup   setup    Handicap   Moves   Test goals
----------------------------------------------------------------------------------------------------------------------------------------
02*.sgf   -       -        -          x       Test absence of player and board setup properties.
03*.sgf   -       x        x          x       1) Test regular handicap: The black stone setup property which exists in the same
                                                 node as the handicap property enumerates the handicap stones.
                                              2) Test that player setup works if the player setup property appears in the same
                                                 node as the handicap property. Test that the white player can be set up in
                                                 accordance to the game rules (white plays first when handicap is present).
04*.sgf   x       x        x          x       1) Test mix of setup and handicap: The black stone setup property which exists in
                                                 the same node as the handicap property enumerates BOTH handicap stones and
                                                 additional setup stones, but the end result is that all those black stones are
                                                 interpreted as handicap stones. The same node also contains a white stone setup
                                                 property, these white stones are treated as regular setup stones.
                                              2) The numeric handicap values in the HA property does not match the number of
                                                 handicap stones enumerated by the black stone setup property. This is currently
                                                 accepted, but might be rejected in the future.
05*.sgf   x       x        -          x       1) Test regular black/white stone setup without handicap.
                                              2) Test that the black player can be set up. Test that this works if the first
                                                 move is actually by black.
06*.sgf   x       x        x          x       1) Test setup and handicap in separate nodes. Unlike in 04*.sgf, if the black stone
                                                 setup property is in a different node than the HA property, this results in
                                                 genuine black setup stones.
                                              2) Test that a different player can be setup than the player who actually makes
                                                 the first move. Load the .sgf file, then go the initial board position. The
                                                 first move must be shown as by white, even though the black player is set up
                                                 to play first. Discard all moves then play a move - now the black player plays
                                                 first in accordance with the player setup.
07*.sgf   x       x        x          x       Tests the same things as 06*.sgf, albeit with different data. The difference is
                                              that this file was saved by Fuego, whereas 06*.sgf was manually crafted. The
                                              difference is a bit artificial.
08*.sgf   x       -        -          x       Test that board setup properties in multiple nodes are aggregated.
09*.sgf   x       -        -          -       Same as 08*.sgf, but without moves.
10*.sgf   x       x        x          -       Test what happens if board setup properties in later nodes "overwrite" intersections
                                              already occupied by handicap stones. In this case, the .sgf file is illegal because a
                                              white setup stone is placed on intersection K4 which is already occupied by a handicap
                                              stone.
11*.sgf   x       x        x          -       1) Test what happens if board setup properties in later nodes "overwrite" intersections
                                                 already occupied by handicap stones. In this case, the .sgf file is legal because a
                                                 black setup stone is placed on intersection D4 which is already occupied by a handicap
                                                 stone. The result is that the black setup stone is ignored and intersection D4 is
                                                 treated as handicap stone.
                                              2) Test that multiple player setup properties can appear in the .sgf file and that the
                                                 last one wins. Load the .sgf file then play a move - the black player must play first.
12*.sgf   x       x        x          x       1) Same board setup as 11*.sgf, but with moves.
                                              2) Player setup properties are slightly different than in 11*.sgf. The white player
                                                 plays first, and it's the same player who actually makes the first  move.
13*.sgf   -       x        -          x       Test that a different player can be setup than the player who actually makes the first
                                              move. This is the same test as in 06*.sgf, but this time without any board setup nor
                                              handicap present.
14*.sgf   x       x        x          -       Same board setup as 11*.sgf, but with only a single player setup property located in
                                              the node of the handicap property. After loading the file white must play first. It
                                              seems as if this file is somewhat superfluous.
15*.sgf   x       x        x          -       Test what happens if board setup properties in later nodes "overwrite" intersections
                                              already occupied by previous setup stones. This is always legal: Intersection A1
                                              ends up with a white stone (overwriting a previously set up black stone), and
                                              intersection T19 ends up with a black stone (overwriting a previously set up white stone).
16*.sgf   x       -        -          -       Test that a board setup that places stones with 0 liberties is illegal. In this test the
                                              white stones have 0 liberties. The .sgf file is illegal.
17*.sgf   x       -        -          -       Same as 16*.sgf, but in this test the black stones have 0 liberties. The .sgf file is
                                              illegal.
18*.sgf   x       x        -          x       Test that a board setup can contribute to a positional superko. The .sgf file is illegal
                                              when loaded with positional superko rules. The .sgf file is legal when loaded with
                                              simple ko or situation superko rules.
19*.sgf   x       x        -          x       Test that a board setup can contribute to a situational superko. The .sgf file is illegal
                                              when loaded with situational and also positional superko rules. The .sgf file is legal
                                              when loaded with simple ko rules.
20*.sgf   -       -        x          -       Test that if handicap is present but no explicit player setup, the game rules ensure
                                              that white plays first. After loading the .sgf, make sure that white plays first.
                                              This test is especially interesting because Fuego always writes a player setup property
                                              to the .sgf file if handicap is present.

To create the files for the above tests, copy & paste the following lines into
a shell script, then run that shell script.

cat << EOF >02-no-setup-no-playersetup-no-handicap-with-moves.sgf
(;SZ[19]KM[6.5]
DT[2018-12-31]
PB[GoUctPlayer]
PW[GoUctPlayer];B[pp];W[pd];B[cp];W[dd])
EOF

cat << EOF >03-no-setup-with-playersetup-with-handicap-with-moves.sgf
(;SZ[19]KM[6.5]
DT[2018-12-31]
AB[dp][pd][dd][pp][dj][pj][jp][jd]HA[8]PL[W]
PW[GoUctPlayer]
PB[GoUctPlayer];W[gc];B[cg];W[qm];B[gq])
EOF

cat << EOF >04-with-setup-with-playersetup-with-handicap-with-moves.sgf
(;FF[4]CA[UTF-8]AP[GoGui:1.4.9]
HA[7]PW[Fuego-trunk]DT[2018-12-31]
AB[dp][pd][dd][pp][jj][dj][pj][da][fa][ia][ka][ja][ga][ea]
AW[ma][na][oa][pa][qa][ra][sa]PL[W];W[qf])
EOF

cat << EOF >05-with-setup-with-playersetup-no-handicap-with-moves.sgf
(;FF[4]CA[UTF-8]AP[GoGui:1.4.9]
KM[6.5]DT[2018-12-31]
AB[da][ea][fa][ig]AW[oa][pa][qa][ra]PL[B];B[fk];W[lm];B[pj];W[pp];B[hq])
EOF

cat << EOF >06-with-setup-with-playersetup-with-handicap-with-moves-manually-crafted.sgf
(;SZ[19]KM[6.5]
DT[2018-12-31]
AB[dp][pd][dd][pp][dj][pj][jp][jd]HA[8]
PW[GoUctPlayer]
PB[GoUctPlayer]
;AB[da][ea][fa][ig]AW[oa][pa][qa][ra]PL[B]
;W[gc];B[cg];W[qm];B[gq])
EOF

cat << EOF >07-with-setup-with-playersetup-with-handicap-with-moves-saved-by-fuego.sgf
(;SZ[19]KM[6.5]
DT[2019-01-01]
AB[dp][pd][dd][pp][dj][pj][jp][jd]HA[8]PL[W]
PW[GoUctPlayer]
PB[GoUctPlayer];
AB[as][ar]
AW[ra][sa];W[ic];B[jc])
EOF

cat << EOF >08-with-setup-no-playersetup-no-handicap-with-moves.sgf
(;SZ[19]KM[6.5]
DT[2019-01-01]
PB[GoUctPlayer]
PW[GoUctPlayer];
AB[as][ar]
AW[ra][sa];
AB[cm]
AW[pj];
AB[dp]
AW[gl];B[dd];W[pp])
EOF

cat << EOF >09-with-setup-no-playersetup-no-handicap-no-moves.sgf
(;SZ[19]KM[6.5]
DT[2019-01-01];
AB[as][ar]
AW[ra][sa];
AB[cm]
AW[pj];
AB[dp]
AW[gl])
EOF

cat << EOF >10-with-setup-with-playersetup-with-handicap-no-moves.sgf
(;SZ[19]KM[6.5]
DT[2019-01-01]
AB[dp][pd][dd][pp][jj][dj][pj][jp][jd]HA[9]PL[W];
AB[as][ar]
AW[ra][sa];
AB[cm]
AW[pj];
AW[jp]
AB[dp])
EOF

cat << EOF >11-with-setup-with-playersetup-with-handicap-no-moves.sgf
(;SZ[19]KM[6.5]
DT[2019-01-01]
AB[dp][pd][dd][pp][jj][dj][pj][jp][jd]HA[9]PL[W];
AB[as][ar]
AW[ra][sa]PL[B];
AB[cm]PL[W];
AB[dp]PL[W];
PL[B])
EOF

cat << EOF >12-with-setup-with-playersetup-with-handicap-with-moves.sgf
(;SZ[19]KM[6.5]
DT[2019-01-01]
AB[dp][pd][dd][pp][jj][dj][pj][jp][jd]HA[9]PL[W]
PW[GoUctPlayer]
PB[GoUctPlayer];
AB[as][ar]
AW[ra][sa]PL[B];
AB[cm]PL[W];
AB[dp]PL[B];
PL[W];W[mc];B[mq])
EOF

cat << EOF >13-no-setup-with-playersetup-no-handicap-with-moves-playersetupdoesnotmatchmove.sgf
(;SZ[19]KM[6.5]
DT[2019-01-01]PL[W]
PB[GoUctPlayer];B[pp])
EOF

cat << EOF >14-with-setup-with-playersetup-with-handicap-no-moves.sgf
(;SZ[19]KM[6.5]
DT[2019-01-01]
AB[dp][pd][dd][pp][jj][dj][pj][jp][jd]HA[9]PL[W];
AB[as][ar]
AW[ra][sa];
AB[cm];
AB[dp])
EOF

cat << EOF >15-with-setup-with-playersetup-with-handicap-no-moves.sgf
(;SZ[19]KM[6.5]
DT[2019-01-01]
AB[dp][pd][dd][pp][jj][dj][pj][jp][jd]HA[9]PL[W];
AB[as][ar]
AW[ra][sa];
AB[cm];
AW[as]
AB[sa])
EOF

cat << EOF >16-with-setup-no-playersetup-no-handicap-no-moves.sgf
(;SZ[19]KM[6.5]
DT[2019-01-04];
AB[ds][cr][bq][ap]
AW[as][bs][cs][ar][br][aq])
EOF

cat << EOF >17-with-setup-no-playersetup-no-handicap-no-moves.sgf
(;SZ[19]KM[6.5]
DT[2019-01-04];
AW[ds][cr][bq][ap]
AB[as][bs][cs][ar][br][aq])
EOF

cat << EOF >18-with-setup-with-playersetup-no-handicap-with-moves.sgf
(;SZ[19]KM[6.5]
DT[2019-01-05];
AB[bs][ds][cr]
AW[ar][br]PL[W];W[dr];B[as];W[cs];B[bs])
EOF

cat << EOF >19-with-setup-with-playersetup-no-handicap-with-moves.sgf
(;SZ[19]
DT[2019-01-05]KM[6.5];
AB[bs][ds][cr]
AW[ar][br]PL[W];W[];B[as];W[cs];B[bs])
EOF

cat << EOF >20-no-setup-no-playersetup-with-handicap-no-moves.sgf
(;SZ[19]KM[6.5]
DT[2018-12-31]
AB[dp][pd][dd][pp][dj][pj][jp][jd]HA[8]
PW[GoUctPlayer]
PB[GoUctPlayer])
EOF


Board setup mode tests
- In the board setup settings, disable the "auto-enable board setup" user
  preference.
- Start a new human vs. human game with handicap.
  - Check that the handicap stones are not marked.
  - Check that the "More game action" alert shows an entry to switch to board
    setup mode.
- Play a move.
  - Check that the "More game action" alert no longer shows an entry to switch
    to board setup mode.
- Change board position to board position 0.
  - Check that the "More game action" alert shows an entry to switch to board
    setup mode.
- Switch to board setup mode.
  - Check that all handicap stones are marked.
  - Check that the status view displays a message that indicates that the app
    is now in board setup mode.
  - Check that the following game actions are now available:
    - Start play mode
    - Switch setup stone color to black
    - In the "More game actions" menu: Set up a side to play first
  - Check that the the following game actions are not available:
    - Discard all setup stones
    - In the "More game actions" menu: Switch to board setup mode
- Tap "Start play mode".
  - Check that the app is now in play mode and that the board setup game actions
    are no longer available.
  - Check that the "More game action" alert shows an entry to switch to board
    setup mode.
- Switch to board setup mode, then change board position to board position 1.
  - Check that the app is now in play mode and that the board setup game actions
    are no longer available.
- Switch to scoring mode.
  - Check that the "More game action" alert does not show an entry to switch to
    board setup mode.
- Change board position to board position 0.
  - Check that the "More game action" alert shows an entry to switch to board
    setup mode.
- Switch to board setup mode.
  - Check that the app is no longer in scoring mode.
  - Check that the "More game action" alert does not show an entry to switch to
    scoring mode.
- Switch to scoring mode.
  - Check that the "More game action" alert shows an entry to switch to board
    setup mode.


Tests for placing setup stones
- In the board setup settings, enable the "change handicap alert" user
  preference.
- Start a new human vs. human game with handicap >= 3.
- Play a move.
- Change board position to board position 0.
- Switch to board setup mode.
- Tap an empty intersection. The "Discard all future moves" alert is displayed.
- Decline to discard future moves.
  - Check that moves have not been discarded.
  - Check that the intersection remains empty.
- Tap an empty intersection. The "Discard all future moves" alert is displayed.
- Agree to discard future moves.
  - Check that moves have been discarded and that it is no longer possible to
    change board position.
  - Check that a black stone is placed on the empty intersection.
  - Check that the game action "Discard all setup stones" is now available.
- Tap the intersection with the black stone.
  - Check that the stone changes color to white.
  - Check that the game action "Discard all setup stones" is still available.
- Tap the intersection with the white stone.
  - Check that the stone is cleared and the intersection becomes empty.
  - Check that the game action "Discard all setup stones" is no longer
    available.
- Tap "Switch setup stone color to black". The game action toggles to
  "Switch setup stone color to white".
- Tap an empty intersection.
  - Check that a white stone is placed on the empty intersection.
  - Check that the game action "Discard all setup stones" is now available.
- Tap the intersection with the white stone.
  - Check that the stone changes color to black.
  - Check that the game action "Discard all setup stones" is still available.
- Tap the intersection with the black stone.
  - Check that the stone is cleared and the intersection becomes empty.
  - Check that the game action "Discard all setup stones" is no longer
    available.
- Tap "Switch setup stone color to white". The game action toggles to
  "Switch setup stone color to black".
- Tap an intersection with a handicap stone. A "Change handicap" alert is
  displayed.
- Decline to remove the handicap stone. Check that the handicap stones remains
  on the intersection.
- Tap an intersection with a handicap stone. A "Change handicap" alert is
  displayed.
- Agree to remove the handicap stone. Check that the handicap stone is removed
  and the intersection becomes empty.
- Tap "Switch setup stone color to black". The game action toggles to
  "Switch setup stone color to white".
- Tap an intersection with a handicap stone. A "Change handicap" alert is
  displayed.
- Agree to remove the handicap stone. Check that the handicap stone is removed
  and the intersection becomes empty.
- Tap an empty intersection.
  - Check that a black stone is placed on the empty intersection.
  - Check that the game action "Discard all setup stones" is now available.
- Switch to play mode and play a move.
- Change board position to board position and switch to board setup mode.
  - Check that the previously placed black setup stone is still present.
  - Check that at least one handicap stone is still present.
  - Check that the game action "Discard all setup stones" is available.
- Tap "Discard all setup stones". The "Discard all future moves" alert is
  displayed.
- Decline to discard future moves.
  - Check that moves have not been discarded.
  - Check that the black setup stone is still present.
- Tap "Discard all setup stones". The "Discard all future moves" alert is
  displayed.
- Agree to discard future moves. A "Discard all setup stones" alert is
  displayed.
- Decline to discard all setup stones.
  - Check that moves have not been discarded.
  - Check that the black setup stone is still present.
- Tap "Discard all setup stones". The "Discard all future moves" alert is
  displayed.
- Agree to discard future moves. A "Discard all setup stones" alert is
  displayed.
- Agree to discard all setup stones.
  - Check that moves have been discarded and that it is no longer possible to
    change board position.
  - Check that the black stone is no longer present.
  - Check that the game action "Discard all setup stones" is no longer
    available.


Board setup tests when game has ended
- Start a new human vs. human game.
- Play two pass moves. The game automatically switches to scoring mode.
  - In the "Game info" screen, check that the game is ended.
- Change board position to board position 0.
- Switch to board setup mode.
- Tap an empty intersection. The "Discard all future moves" alert is displayed.
- Decline to discard future moves.
  - Check that moves have not been discarded.
  - In the "Game info" screen, check that the game is still ended.
- Tap an empty intersection. The "Discard all future moves" alert is displayed.
- Agree to discard future moves
  - Check that moves have been discarded and that it is no longer possible to
    change board position.
  - Check that a setup stone is placed on the empty intersection.
  - Check that the game action "Discard all setup stones" is now available.
  - In the "Game info" screen, check that the game has not yet started.
- Switch to play mode.
- Play two pass moves. The game automatically switches to scoring mode.
  - In the "Game info" screen, check that the game is ended.
- Change board position to board position 0.
- Switch to board setup mode.
- Tap "Discard all setup stones". The "Discard all future moves" alert is
  displayed.
- Decline to discard future moves.
  - Check that moves have not been discarded.
  - Check that the setup stone is still present.
  - In the "Game info" screen, check that the game is still ended.
- Tap "Discard all setup stones". The "Discard all future moves" alert is
  displayed.
- Agree to discard future moves. A "Discard all setup stones" alert is
  displayed.
- Decline to discard all setup stones.
  - Check that moves have not been discarded.
  - Check that the setup stone is still present.
  - In the "Game info" screen, check that the game is still ended.
- Tap "Discard all setup stones". The "Discard all future moves" alert is
  displayed.
- Agree to discard future moves. A "Discard all setup stones" alert is
  displayed.
- Agree to discard all setup stones.
  - Check that moves have been discarded and that it is no longer possible to
    change board position.
  - Check that the setup stone is no longer present.
  - Check that the game action "Discard all setup stones" is no longer
    available.
  - In the "Game info" screen, check that the game has not yet started.


Illegal board setup tests
- In the board setup settings, disable the "try not to place illegal stones"
  user preference.
- Load game illegal-board-setup-test.sgf.
- Switch to board setup mode.
- Make sure that the default setup stone color is black.
- Check that placing a black setup stone on the following intersections shows a
  "Stone is not legal" alert, with the alert message explaining why the stone
  cannot be placed.
- H8: Setup stone would have no liberties.
- B9: Setup stone would connect to a black stone group and take away the group's
  last liberty.
- G5: Setup stone would take away all liberties from a white stone group.
- H3: Setup stone would take away all liberties from a white stone.
- C3: Setup stone would split up a black stone group and take away all liberties
  from one of the resulting sub-groups.
- E3: Setup stone would take away all liberties from a white stone group.
  >>> The message is the same as for G5, but in the background there is special
      handling to distinguish this case from the C3 "splitting" "case.
- In the board setup settings, enable the "try not to place illegal stones"
  user preference.
- Load game illegal-board-setup-test.sgf.
- Switch to board setup mode.
- Make sure that the default setup stone color is black.
- Check that placing a setup stone on B9 shows a "Stone is not legal" alert.
  The message explains that the setup stone would take away all liberties from
  a black stone group.
  >>> The reason why the alert is still displayed is that neither a black nor a
      white stone can be placed without committing suicide.
- Check that placing a setup stone on the following intersections does not show
  a "Stone is not legal" alert.
- H8: Places a white instead of a black setup stone.
- G5: Places a white instead of a black setup stone.
- H3: Places a white instead of a black setup stone.
- E3: Removes the black setup stone that is already on the board instead of
  placing a black setup stone.
- C3: Removes the black setup stone that is already on the board instead of
  placing a black setup stone.


Player setup tests
- Start a new human vs. human game with handicap.
- Open the "Game info" screen.
  - Check that "Side to play first" displays "White"
  - Check that the footer message of the "Game Information" section displays the
    information that the side to play first is currently determined by the
    normal game rules.
- Play a move.
- Change board position to board position 0.
- Switch to board setup mode.
- In the "More game actions" alert, select "Set up a side to play first".
- A screen is displayed that lets the user select from these options:
  - Game rules
  - Black
  - White
  Check that "Game rules" has a check mark.
- Tap "Cancel".
  - In the "Game info" screen, check that "Side to play first" displays "White".
  - In the "Game info" screen, check that the footer message of the
    "Game Information" section displays the information that the side to move
    first is currently determined by the normal game rules.
- In the "More game actions" alert, select "Set up a side to play first".
- Select "Black" and tap "Done". The "Discard all future moves" alert is
  displayed.
- Decline to discard future moves.
  - Check that moves have not been discarded.
  - In the "Game info" screen, check that "Side to play first" displays "White".
  - In the "Game info" screen, check that the footer message of the
    "Game Information" section displays the information that the side to move
    first is currently determined by the normal game rules.
- In the "More game actions" alert, select "Set up a side to play first".
- Select "Black" and tap "Done". The "Discard all future moves" alert is
  displayed.
- Agree to discard future moves.
  - Check that moves have been discarded and that it is no longer possible to
    change board position.
  - In the "Game info" screen, check that "Side to play first" displays "Black".
  - In the "Game info" screen, check that the footer message of the
    "Game Information" section displays the information that the side to move
    first has been overridden.
- Switch to play mode.
- Play a move.
  - Check that the first move is played by black.
- Discard the move.
- Switch to board setup mode.
- In the "More game actions" alert, select "Set up a side to play first".
- Select "Game Rules" and tap "Done".
- Open the "Game info" screen.
  - Check that "Side to play first" displays "White"
  - Check that the footer message of the "Game Information" section displays the
   information that the side to play first is currently determined by the
   normal game rules.


Board setup and player setup tests in a computer vs. computer game
- Start a new computer vs. computer game.
- Pause the game after the computer has played at least one move.
- Change board position to board position 0.
- Switch to board setup mode.
  - Check that the following game actions are now available:
    - Start play mode
    - Switch setup stone color to black
    - In the "More game actions" menu: Set up a side to play first
- Tap an empty intersection. The "Discard all future moves" alert is displayed.
- Agree to discard future moves
  - Check that moves have been discarded and that it is no longer possible to
    change board position.
  - Check that a setup stone is placed on the empty intersection.
  - Check that the game action "Discard all setup stones" is now available.
  - In the "Game info" screen, check that the game is paused.
- Switch to play mode.
- Continue the game.
- Pause the game after the computer has played at least one move.
- Change board position to board position 0.
- Switch to board setup mode.
- Tap "Discard all setup stones". The "Discard all future moves" alert is
  displayed.
- Agree to discard future moves. A "Discard all setup stones" alert is
  displayed.
- Agree to discard all setup stones.
  - Check that moves have been discarded and that it is no longer possible to
    change board position.
  - Check that the setup stone is no longer present.
  - Check that the game action "Discard all setup stones" is no longer
    available.
  - In the "Game info" screen, check that the game is paused.


Board setup user preferences test
- In the board setup settings, disable the "auto-enable board setup" user
  preference.
- Start a new human vs. human game
- Check that the UI area "Play" is in play mode.
- In the board setup settings, enable the "auto-enable board setup" user
  preference.
- Start a new human vs. human game with handicap
- Check that the UI area "Play" is in board setup mode.
- Make sure that the default setup stone color is black.
- In the board setup settings, enable the "double-tap to zoom" user preference.
- Check that double-tapping the board zooms the board in.
- In the board setup settings, disable the "double-tap to zoom" user preference.
- Check that double-tapping the board places first a black setup stone, then a
  white setup stone.
- In the board setup settings, enable the "change handicap alert" user
  preference.
- Check that tapping a handicap stone shows a "Change handicap" alert.
- Decline
- Decline to remove the handicap stone. Check that the handicap stones remains
  on the intersection.
- In the board setup settings, disable the "change handicap alert" user
  preference.
- Tap a handicap stone
  - Check that the "Change handicap" alert is not shown.
  - Check that the handicap stone is removed and the intersection becomes empty.
